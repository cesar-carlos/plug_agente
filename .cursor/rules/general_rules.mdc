---
description: Regras gerais do projeto - Documentação, comentários e práticas gerais
globs: ["lib/**/*.dart", "test/**/*.dart"]
alwaysApply: true
---

# Regras Gerais do Projeto

## Documentação e Comentários

### Documentação Automática

- ❌ **NÃO criar documentação automaticamente** (comentários `///`, `README.md`, etc.)
- ❌ **NÃO criar arquivos de documentação** sem solicitação explícita
- ❌ **NÃO adicionar comentários** desnecessários no código
- ✅ **Apenas criar documentação quando explicitamente solicitado** pelo usuário
- ✅ **Código deve ser autoexplicativo** através de nomenclatura clara

### Quando Documentar

- ✅ Documente apenas APIs públicas complexas quando solicitado
- ✅ Adicione comentários apenas para explicar "por quê", não "o quê"
- ✅ Use comentários para decisões arquiteturais importantes quando necessário
- ✅ Documente apenas quando o código não é autoexplicativo

### Exemplo de Comportamento

**❌ NÃO fazer:**

```dart
/// Service for managing user operations.
///
/// This service provides methods to create, update, and delete users.
class UserService {
  /// Creates a new user with the given [name] and [email].
  ///
  /// Returns the created [User] if successful, or throws an exception.
  Future<User> createUser({
    required String name,
    required String email,
  }) async {
    // Implementação
  }
}
```

**✅ Fazer (sem documentação automática):**

```dart
class UserService {
  Future<User> createUser({
    required String name,
    required String email,
  }) async {
    // Implementação
  }
}
```

**✅ Fazer apenas quando solicitado:**

```dart
/// Service for managing user operations.
///
/// This service provides methods to create, update, and delete users.
class UserService {
  // Documentação criada apenas porque foi explicitamente solicitada
}
```

## Arquivos de Documentação

### Não Criar Automaticamente

- ❌ **NÃO criar** `README.md` automaticamente
- ❌ **NÃO criar** arquivos `.md` de documentação
- ❌ **NÃO criar** arquivos de changelog ou release notes
- ❌ **NÃO criar** arquivos de exemplo ou guias
- ✅ **Apenas criar** quando explicitamente solicitado

### Comentários no Código

**✅ Bom: Comentários apenas quando necessário**

```dart
// ✅ Bom: explica por quê (decisão importante)
// Usar cache local para reduzir chamadas à API em 80%
final cachedUser = await localCache.getUser(id);

// ✅ Bom: explica decisão arquitetural
// Usar Result ao invés de Exception para manter compatibilidade com Domain Layer
return await repository.getById(id);
```

**❌ Evite: Comentários desnecessários**

```dart
// ❌ Evite: explica o que (código já faz isso)
// Obter usuário do cache
final user = await cache.getUser(id);

// ❌ Evite: comentário óbvio
// Incrementar contador
_counter++;
```

## Princípios de Código Limpo

### Código Autoexplicativo

- ✅ Use nomes descritivos e claros
- ✅ Nomenclatura deve deixar o código autoexplicativo
- ✅ Evite comentários que apenas repetem o código
- ✅ Prefira código claro sobre comentários

### Evitar Números Mágicos

- ❌ **NÃO usar números mágicos** no código
- ✅ **SEMPRE usar constantes nomeadas** para valores literais
- ✅ Use constantes com nomes descritivos que expliquem o propósito do valor
- ✅ Agrupe constantes relacionadas em classes ou arquivos dedicados

**❌ Evite: Números mágicos**

```dart
if (retryCount > 3) {
  throw Exception('Max retries exceeded');
}

await Future.delayed(Duration(seconds: 30));

if (user.age < 18) {
  return false;
}
```

**✅ Prefira: Constantes nomeadas**

```dart
const maxRetries = 3;
const defaultTimeout = Duration(seconds: 30);
const minimumAge = 18;

if (retryCount > maxRetries) {
  throw Exception('Max retries exceeded');
}

await Future.delayed(defaultTimeout);

if (user.age < minimumAge) {
  return false;
}
```

**✅ Para constantes relacionadas, use classes:**

```dart
class Timeouts {
  static const Duration defaultTimeout = Duration(seconds: 30);
  static const Duration shortTimeout = Duration(seconds: 5);
  static const Duration longTimeout = Duration(minutes: 5);
}

class Limits {
  static const int maxRetries = 3;
  static const int maxFileSize = 1024 * 1024;
  static const int minPasswordLength = 8;
}
```

**✅ Exemplo de uso em contexto real:**

```dart
// ❌ Evite: números mágicos espalhados
if (port < 1 || port > 65535) {
  throw Exception('Invalid port');
}
await Future.delayed(Duration(milliseconds: 500));
if (retryCount >= 3) {
  // ...
}

// ✅ Prefira: constantes organizadas
class NetworkConstants {
  static const int minPort = 1;
  static const int maxPort = 65535;
}

class Timeouts {
  static const Duration retryDelay = Duration(milliseconds: 500);
  static const int maxRetries = 3;
}

// Uso
if (port < NetworkConstants.minPort || port > NetworkConstants.maxPort) {
  throw Exception('Invalid port');
}
await Future.delayed(Timeouts.retryDelay);
```

## Exemplo Completo

**❌ Evite:**

```dart
// Criar usuário
void createUser(String name) {
  // Validar nome
  if (name.isEmpty) {
    // Lançar erro
    throw Exception('Name cannot be empty');
  }
  // Salvar usuário
  _saveUser(name);
}
```

**✅ Prefira:**

```dart
void createUser(String name) {
  if (name.isEmpty) {
    throw Exception('Name cannot be empty');
  }
  _saveUser(name);
}
```

**✅ Com constante (contexto real):**

```dart
// ❌ Evite
if (userName.length < 3) {
  throw ValidationException('Name too short');
}

// ✅ Prefira
class ValidationRules {
  static const int minUserNameLength = 3;
  static const int maxUserNameLength = 50;
}

if (userName.length < ValidationRules.minUserNameLength) {
  throw ValidationException('Name too short');
}
if (userName.length > ValidationRules.maxUserNameLength) {
  throw ValidationException('Name too long');
}
```

## Checklist de Regras Gerais

- [ ] NÃO criar documentação automaticamente
- [ ] NÃO criar arquivos `.md` sem solicitação explícita
- [ ] NÃO adicionar comentários desnecessários
- [ ] Código deve ser autoexplicativo
- [ ] Documentar apenas quando explicitamente solicitado
- [ ] Comentários apenas para explicar "por quê", não "o quê"
- [ ] Usar nomenclatura clara ao invés de comentários
- [ ] **NÃO usar números mágicos** - usar constantes nomeadas
- [ ] Agrupar constantes relacionadas em classes
- [ ] Manter código limpo e manutenível
